# tox (https://tox.readthedocs.io/) is a tool for running tests
# in multiple virtualenvs. This configuration file will run the
# test suite on all supported python versions. To use it, "pip install tox"
# and then run "tox" from this directory.

[tox]
# py27, py35, py36, py37, py38,
envlist = py39
isolated_build = True

[tox:.package]
# See https://tox.wiki/en/latest/example/package.html#poetry.
# note tox will use the same python version as under what tox is installed to package
# so unless this is python 3 you can require a given python version for the packaging
# environment via the basepython key
basepython = python3

[testenv]
whitelist_externals =
    /bin/bash
deps =
    pyyaml==5.3.1
    poetry==1.1.8
commands =
    # sanity check
    dtrx --help

    # run tests
    {envpython} tests/compare.py

    # confirm building works
    {envpython} poetry build
